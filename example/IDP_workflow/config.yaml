# ============================================================================
# IDP (Intrinsically Disordered Proteins) configuration file
# ============================================================================

# [ Input files ]
# ----------------------------------------------------------------------------
input_files:
  sequence_fasta: "protein.fasta"  # Protein sequence file (FASTA)

# [ Protein settings ]
# ----------------------------------------------------------------------------
protein:
  name: "FUS_LC"        # Sequence name selected from FASTA
  nmol: 20              # Number of protein molecules

# Global task type (define once)
task_type: "IDP"

# [ Stage 1: Coarse-grained CALVADOS simulation ]
# ----------------------------------------------------------------------------
cg_calvados:
  
  # General parameters
  platform: "CUDA"
  temp: 310.0
  box: [10.0, 10.0, 40.0]  # nm; enlarged to accommodate 20 proteins
  steps: 200000     # 200k simulation steps
  wfreq: 5000       # write frequency (steps per DCD frame)
  logfreq: 1000
  sysname: "idp_sim"
  eps_lj: 0.2
  ionic: 0.15
  pH: 7.0
  restart: null
  frestart: "restart.chk"
  topol: "slab"  # use slab topology for more stable initial configuration
  slab_width: 20  # nm; thickness of the central high-density region for slab topology
  
  # IDP-specific notes
  # Uses CALVADOS2 residues
  # components.yaml will be auto-generated by prepare.py

# [ Stage 2: Backmapping CG to AA ]
# ----------------------------------------------------------------------------
backmapping:
  box_resize:
    enabled: False
    # New box dimensions [x, y, z] in nm (same unit as cg_calvados.box)
    new_box_dimensions: [10.0, 10.0, 40.0]

openmm_refinement:
  pass


# stage_3: build and equilibrate explicit solvent MD simulation
gromacs_explicit_solvent_build_and_equilibration:
  num_cpus: 24  # Total number of threads (for backward compatibility)
  num_mpi_threads: 1  # Number of MPI threads
  num_omp_threads: 24  # Number of OpenMP threads per MPI thread
  gmx_excute: null # if null, MS2 will auto search and selecte the PATH. However, sometimes you can provide a double pricision gmx to minimize the structure
  water_gro: "cg300water.gro"
  ions_concentration: 0.15
  temperature: 300.0
  pressure: 1.0
  Use_anti_freeze_water: True
  Anti_free_water_ratio: 0.1
  NVT: True 
  NVT_steps: 1000000
  NPT: True
  NPT_steps: 1000000
  constraints: null # null or hbonds
  skip_equilibration: false # Set to true to skip NVT/NPT equilibration, only do minimization


aa_simulation:
  # To be implemented
  pass
